# üöÄ Clearity Backend - –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º:

1. ‚úÖ Python 3.11+
2. ‚úÖ –í–Ω–µ—à–Ω—è—è PostgreSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–∏–º—è: `clearity`)
3. ‚úÖ OpenRouter API –∫–ª—é—á (https://openrouter.ai/)

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç (5 —à–∞–≥–æ–≤)

### 1Ô∏è‚É£ –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–æ–π—Ç–µ .env

```bash
cp .env.example .env
```

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ –≤—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ:

```env
DATABASE_URL=postgresql://–≤–∞—à_user:–≤–∞—à_–ø–∞—Ä–æ–ª—å@–≤–∞—à_—Ö–æ—Å—Ç:5432/clearity
OPENROUTER_API_KEY=–≤–∞—à_openrouter_–∫–ª—é—á_–∑–¥–µ—Å—å
```

**–ü—Ä–∏–º–µ—Ä:**

```env
DATABASE_URL=postgresql://postgres:mypass123@db.myserver.com:5432/clearity
OPENROUTER_API_KEY=sk-or-v1-abc123xyz
```

### 3Ô∏è‚É£ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

```bash
python db_utils.py init
```

–≠—Ç–æ —Å–æ–∑–¥–∞—Å—Ç –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –≤–∞—à–µ–π –ë–î.

### 4Ô∏è‚É£ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
python db_utils.py check
```

–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:

```
‚úì Connected to PostgreSQL
‚úì users
‚úì sessions
... (–≤—Å–µ–≥–æ 16 —Ç–∞–±–ª–∏—Ü)
```

### 5Ô∏è‚É£ –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±:**

```bash
uvicorn app.main:app --reload
```

**–ò–ª–∏ –Ω–∞ Windows:**

```bash
run.bat
```

**–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:**

```bash
python -m app.main
```

‚úÖ **–ì–æ—Ç–æ–≤–æ!** –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω –Ω–∞ http://localhost:55110

---

## üß™ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ë—Ä–∞—É–∑–µ—Ä

–û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:55110/docs - —É–≤–∏–¥–∏—Ç–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—É—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é API

### –í–∞—Ä–∏–∞–Ω—Ç 2: Health Check

```bash
curl http://localhost:55110/health
```

–û—Ç–≤–µ—Ç:

```json
{
  "status": "healthy",
  "database": "connected"
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ê–≤—Ç–æ—Ç–µ—Å—Ç

```bash
python test_api.py
```

–≠—Ç–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–æ–∫–∞–∂–µ—Ç –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ API.

---

## üìÅ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

- **app/main.py** - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **.env** - –≤–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å!)
- **app/schemas/db_schema.sql** - —Å—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- **logs/** - –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)

---

## üÜò –ü—Ä–æ–±–ª–µ–º—ã?

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

```bash
python db_utils.py check
```

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

- DATABASE_URL –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –≤ `.env`
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö `clearity` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** —Å–º. `SETUP_EXTERNAL_DB.md`

### OpenRouter –æ—à–∏–±–∫–∏

- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –±–∞–ª–∞–Ω—Å –Ω–∞ https://openrouter.ai/
- –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ `logs/`

### –ü–æ—Ä—Ç 55110 –∑–∞–Ω—è—Ç

–í `app/main.py` –∏–∑–º–µ–Ω–∏—Ç–µ:

```python
uvicorn.run(..., port=55111)  # –≤–º–µ—Å—Ç–æ 55110
```

–ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å –¥—Ä—É–≥–∏–º –ø–æ—Ä—Ç–æ–º:

```bash
uvicorn app.main:app --reload --port 55111
```

---

## üìö –î–∞–ª—å—à–µ —á—Ç–æ?

1. ‚úÖ –°–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
2. üìñ –ò–∑—É—á–∏—Ç–µ API: `API.md`
3. üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: `README.md`
4. üé® –ù–∞—á–∏–Ω–∞–π—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥!

---

## üîó –û—Å–Ω–æ–≤–Ω—ã–µ endpoint'—ã

```bash
# –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
POST /api/chat
{
  "message": "I feel overwhelmed with too many projects"
}

# –ü–æ–ª—É—á–∏—Ç—å mind map
GET /api/sessions/{session_id}/mindmap

# –ü–æ–ª—É—á–∏—Ç—å –∑–∞–¥–∞—á–∏
GET /api/sessions/{session_id}/tasks
```

**–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** http://localhost:55110/docs

---

## üõ†Ô∏è –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ë–î
python db_utils.py check

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ë–î
python db_utils.py stats

# –°–±—Ä–æ—Å–∏—Ç—å –ë–î (—É–¥–∞–ª–∏—Ç –í–°–ï –¥–∞–Ω–Ω—ã–µ!)
python db_utils.py reset

# –¢–µ—Å—Ç API
python test_api.py
```

---

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **START_HERE.md** ‚Üê –≤—ã –∑–¥–µ—Å—å
- **QUICKSTART.md** - –ø–æ–¥—Ä–æ–±–Ω—ã–π quick start
- **SETUP_EXTERNAL_DB.md** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–Ω–µ—à–Ω–µ–π –ë–î
- **README.md** - –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ –¥–∏–∑–∞–π–Ω
- **API.md** - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **PROJECT_STRUCTURE.md** - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

---

## ‚ú® –ì–æ—Ç–æ–≤–æ –∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω, –ë–î –ø–æ–¥–∫–ª—é—á–µ–Ω–∞, API —Ä–∞–±–æ—Ç–∞–µ—Ç.

–ù–∞—á–∏–Ω–∞–π—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞! üéâ
